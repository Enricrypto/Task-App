import{d as S,g as x,u as T,r as h,o as l,c as r,a as t,w as m,v as p,b as y,n as w,e as $,f as C,h as _,i as b,j as g,k as V,t as d,F as A,l as E,m as I}from"./index.0185ce95.js";const f=S("task",{state:()=>({tasks:[]}),actions:{async setTask(){const o=await x();this.tasks=await o,console.log(this.tasks)},updateTask(o,e){},deleteTask(o){const e=this.tasks.findIndex(a=>a.id===o);return console.log("este es el index",e),this.tasks.splice(e,1)},addTask(o){this.tasks.push(o)}},persist:{enabled:!0,strategies:[{key:"task",storage:localStorage}]}}),M={class:"mt-5"},B=["onSubmit"],D={class:"field"},N=t("label",{class:"label"},"Titulo",-1),F={class:"control"},H={class:"control"},L=t("div",{class:"control"},[t("button",{type:"submit",class:"mt-2 button is-info"},"Enviar")],-1),P={__name:"AddTask",setup(o){const e=f(),a=T(),n=h(""),i=h(""),u=a.id;a.user.email;const k=async()=>{await w(u,i.value,n.value);const s={title:i.value,description:n.value,created_at:new Date};e.addTask(s),n.value="",i.value=""};return(s,c)=>(l(),r("div",M,[t("form",{onSubmit:y(k,["prevent"])},[t("div",D,[N,t("div",F,[m(t("input",{"onUpdate:modelValue":c[0]||(c[0]=v=>i.value=v),class:"input",type:"text",placeholder:"titulo"},null,512),[[p,i.value]])])]),t("div",H,[m(t("textarea",{"onUpdate:modelValue":c[1]||(c[1]=v=>n.value=v),class:"textarea",placeholder:"Escribe un post"},null,512),[[p,n.value]])]),L],40,B)]))}},U={class:"section"},j={class:"container"},q={key:0,class:"message is-danger"},z={class:"message-body"},G=t("br",null,null,-1),J={key:1},K={class:"title"},O=["onClick"],Q=t("button",null,"Marcar como hecho",-1),W={__name:"Home",setup(o){const e=T(),a=f();h(""),$(()=>{a.setTask()});const n=async()=>{await I(),a.deleteTask(),a.setTask()};return(i,u)=>{const k=C("router-link");return l(),r("div",U,[t("div",j,[_(e).isAuth?(l(),r("div",J,[t("div",K," Hola "+d(_(e).user.email),1),t("button",{onClick:u[0]||(u[0]=s=>_(e).logout()),class:"button is-danger"},"Cerrar Sesi\xF3n"),t("div",null,[g(P)]),(l(!0),r(A,null,E(_(a).tasks,s=>(l(),r("div",{class:"section",key:s.id},[t("div",null,d(s.title)+" - "+d(s.created_at),1),t("div",null,d(s.description),1),t("button",{onClick:c=>n(s.id)},"Eliminar "+d(s.id),9,O),Q]))),128))])):(l(),r("article",q,[t("div",z,[b(" Iniciar sesion en la APP "),G,g(k,{to:{name:"login"}},{default:V(()=>[b(" Ir a Login ")]),_:1})])]))])])}}};export{W as default};
