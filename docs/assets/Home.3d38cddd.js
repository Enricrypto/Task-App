import{d as y,g as m,u as g,r as h,o as r,c as d,a as t,w as p,v as T,b as S,n as $,e as x,f as C,h as k,i as b,j as f,k as E,t as v,F as I,l as V,m as A,s as M}from"./index.12236fc3.js";const w=y("task",{state:()=>({tasks:[]}),actions:{async setTask(){const o=await m();this.tasks=await o},updateTask(o,a){this.tasks.findIndex(e=>e.id===o)},deleteTask(o){const a=this.tasks.findIndex(e=>e.id===o);return this.tasks.splice(a,1)},async addTask(o){const a=await m();this.tasks=await a}},persist:{enabled:!0,strategies:[{key:"task",storage:localStorage}]}}),B={class:"mt-5"},D=["onSubmit"],N={class:"field"},F=t("label",{class:"label"},"Titulo",-1),H={class:"control"},L={class:"control"},P=t("div",{class:"control"},[t("button",{type:"submit",class:"mt-2 button is-info"},"Enviar")],-1),U={__name:"AddTask",setup(o){const a=w(),e=g(),i=h(""),l=h(""),n=e.id;e.user.email;const u=async()=>{await $(n,l.value,i.value);const _={title:l.value,description:i.value,created_at:new Date};a.addTask(_),i.value="",l.value=""};return(_,s)=>(r(),d("div",B,[t("form",{onSubmit:S(u,["prevent"])},[t("div",N,[F,t("div",H,[p(t("input",{"onUpdate:modelValue":s[0]||(s[0]=c=>l.value=c),class:"input",type:"text",placeholder:"titulo"},null,512),[[T,l.value]])])]),t("div",L,[p(t("textarea",{"onUpdate:modelValue":s[1]||(s[1]=c=>i.value=c),class:"textarea",placeholder:"Escribe un post"},null,512),[[T,i.value]])]),P],40,D)]))}},j={class:"section"},q={class:"container"},z={key:0,class:"message is-danger"},G={class:"message-body"},J=t("br",null,null,-1),K={key:1},O={class:"title"},Q=["onClick"],R=["onClick"],W=["onClick"],Y={__name:"Home",setup(o){const a=g(),e=w();h(""),x(()=>{e.setTask(),e.updateTask()});const i=async n=>{e.setTask(),await A(n),e.deleteTask(n)},l=async n=>{await M(n,!0)};return(n,u)=>{const _=C("router-link");return r(),d("div",j,[t("div",q,[k(a).isAuth?(r(),d("div",K,[t("div",O," Hola "+v(k(a).user.email),1),t("button",{onClick:u[0]||(u[0]=s=>k(a).logout()),class:"button is-danger"},"Cerrar Sesi\xF3n"),t("div",null,[f(U)]),(r(!0),d(I,null,V(k(e).tasks,s=>(r(),d("div",{class:"section",key:s.id},[t("div",null,v(s.title)+" - "+v(s.created_at),1),t("div",null,v(s.description),1),t("button",{onClick:c=>i(s.id)},"Eliminar",8,Q),t("button",{onClick:c=>l(s.id)},"Marcar como hecho",8,R),t("button",{onClick:c=>n.editTask(s.id)},"Editar",8,W)]))),128))])):(r(),d("article",z,[t("div",G,[b(" Iniciar sesion en la APP "),J,f(_,{to:{name:"login"}},{default:E(()=>[b(" Ir a Login ")]),_:1})])]))])])}}};export{Y as default};
